// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum EntityType {
  LOCATAIRE
  BAILLEUR
}

model User {
  id         Int         @id @default(autoincrement())
  nom        String
  prenom     String
  email      String      @unique
  password   String
  telephone  String
  entityType EntityType
  active     Boolean     @default(false)
  Critere    Boolean     @default(false)
  maison     Maison[]
  effectuer  Effectuer[]
}

model Maison {
  Matricule      Int          @id @default(autoincrement())
  type           String
  adresse        String
  surface        String
  prix           String
  nombreDePiece  Int
  descripetion   String?
  photoUrl       String
  disponibilite  Boolean      @default(true)
  proprietaire   String
  user           User?        @relation(fields: [UserId], references: [id])
  UserId         Int
  correspondre   Correspondre []
}

model Recherche {
  id              Int            @id @default(autoincrement())
  user            String
  typeDeRecherche EntityType
  Critere         Boolean        @default(false)
  resultat        Boolean        @default(true)
  effectuer       Effectuer[]
  correspondre    Correspondre[]
}

model Effectuer {
  id          Int        @id @default(autoincrement())
  recherche   Recherche? @relation(fields: [RechercheId], references: [id])
  RechercheId Int
  user        User?      @relation(fields: [userId], references: [id])
  userId      Int
}

model Correspondre {
  id              Int        @id @default(autoincrement())
  recherche       Recherche? @relation(fields: [RechercheId], references: [id])
  RechercheId     Int
  maison          Maison?    @relation(fields: [maisonMatricule], references: [Matricule])
  maisonMatricule Int
}
